<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="以梦为马 不负韶华">
    

    <!--Author-->
    
        <meta name="author" content="Mr-Vincent">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="构建你的第一个React应用"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="以梦为马 不负韶华" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="DongWei&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>构建你的第一个React应用 - DongWei&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../../../../css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">DongWei's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="../../../../index.html">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="../../../../archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/Mr-Vincent">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('https://images.unsplash.com/photo-1581276879432-15e50529f34b?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>构建你的第一个React应用</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2021-10-02
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/coding/">#coding</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                        

<a href="/categories/coding/">coding</a>

                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>最近在B站上看了一个React的视频教程，老师讲的还挺不错的，于是乎听了一半的课程，对React也算是入了门。最后写一个简单的Todo List作为学习的成果。</p>
<p><a href="https://imgtu.com/i/47fjr6" target="_blank" rel="external"><img src="https://z3.ax1x.com/2021/10/01/47fjr6.png" alt="todo list"></a></p>
<h2 id="生成工程"><a href="#生成工程" class="headerlink" title="生成工程"></a>生成工程</h2><p>对于目前的前端开发，工程化早已成为常态。随之而来的工具也变得多种多样。一般使用React的脚手架来生成一些成套的模板文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 全局安装</div><div class="line">npm install -g create-react-app</div><div class="line"># 构建一个my-app的项目</div><div class="line">npx create-react-app my-app</div><div class="line">cd my-app</div><div class="line"></div><div class="line"># 启动编译当前的React项目，并自动打开 http://localhost:3000/</div><div class="line">npm start</div></pre></td></tr></table></figure></p>
<h2 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h2><p>对于传统的前端代码，肯定是js，css，html写到一块去的，或许还会将这些代码分来，写到不同文件然后相互依赖。而前端工程化之后，对代码的复用提高很多，这也是工程化的体现之一。</p>
<p>因此针对todo list这个应用，从上到下自然被拆成了Header，List，Footer三个部分。其中Item是作为List组件的子组件。目录结构如图：<br><a href="https://imgtu.com/i/47h8s0" target="_blank" rel="external"><img src="https://z3.ax1x.com/2021/10/01/47h8s0.png" alt="目录结构"></a></p>
<p>Header组件代表最顶端的输入框，主要功能是提供todo项的输入，每次完成输入敲击回车键就会在中间部分的列表中增加一个条目。<br>List组件表示列表，主要功能展示所有的todo项，提供删除和勾选完成的操作动作。<br>Footer组件是作为一些提示信息，提供全选和反选以及清理标记的列表项的功能。</p>
<p>脚手架中给我们提供了入口文件index.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span>;</div><div class="line"></div><div class="line">ReactDOM.render(</div><div class="line">  &lt;React.StrictMode&gt;</div><div class="line">    &lt;App /&gt;</div><div class="line">  &lt;/React.StrictMode&gt;,</div><div class="line">  document.getElementById('root')</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>App也是一个组件来被使用。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">'./App.css'</span>;</div><div class="line"><span class="keyword">import</span> List <span class="keyword">from</span> <span class="string">'./components/List'</span>;</div><div class="line"><span class="keyword">import</span> Header <span class="keyword">from</span> <span class="string">'./components/Header'</span>;</div><div class="line"><span class="keyword">import</span> Footer <span class="keyword">from</span> <span class="string">'./components/Footer'</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>(props)&#123;</div><div class="line">    <span class="keyword">super</span>(props)</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      <span class="attr">todoList</span>:[</div><div class="line">        &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">"吃饭"</span>,<span class="attr">done</span>:<span class="literal">false</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>:<span class="string">"睡觉"</span>,<span class="attr">done</span>:<span class="literal">false</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">name</span>:<span class="string">"拉屎"</span>,<span class="attr">done</span>:<span class="literal">false</span>&#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  addTodo = <span class="function">(<span class="params">obj</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123;todoList&#125; = <span class="keyword">this</span>.state</div><div class="line">    <span class="keyword">const</span> newTodo = [obj,...todoList]</div><div class="line">    <span class="built_in">console</span>.log(newTodo)</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">todoList</span>:newTodo&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  updateTodo = <span class="function">(<span class="params">id,done</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123;todoList&#125; = <span class="keyword">this</span>.state</div><div class="line">    <span class="keyword">const</span> newTodo = todoList.map(<span class="function"><span class="params">r</span>=&gt;</span>&#123;</div><div class="line">      <span class="keyword">if</span>(r.id === id) <span class="keyword">return</span> &#123;...r,done&#125;</div><div class="line">      <span class="keyword">else</span> <span class="keyword">return</span> r</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">todoList</span>:newTodo&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  clearDone = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">    <span class="comment">// 将状态为checked 的数据过滤掉就完事了 更新state</span></div><div class="line">    <span class="keyword">const</span> &#123;todoList&#125; = <span class="keyword">this</span>.state</div><div class="line">    <span class="keyword">const</span> newTodo = todoList.filter(<span class="function"><span class="params">r</span>=&gt;</span>&#123;</div><div class="line">      <span class="keyword">return</span> !r.done</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">todoList</span>:newTodo&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// 全选操作 将数据中的done全部置为checked状态 item必须使用checked属性，否则更新不了ui的状态（不能defaultChecked属性）</span></div><div class="line">  handleCheckAll = <span class="function">(<span class="params">done</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123;todoList&#125; = <span class="keyword">this</span>.state</div><div class="line">    <span class="keyword">const</span> newTodo = todoList.map(<span class="function"><span class="params">r</span>=&gt;</span>&#123;</div><div class="line">       <span class="keyword">return</span> &#123;...r,done&#125;</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">todoList</span>:newTodo&#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  deleteTodo = <span class="function">(<span class="params">id</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">const</span> &#123;todoList&#125; = <span class="keyword">this</span>.state</div><div class="line">    <span class="keyword">const</span> newTodo = todoList.filter(<span class="function"><span class="params">r</span>=&gt;</span>&#123;</div><div class="line">      <span class="keyword">return</span> id !== r.id</div><div class="line">    &#125;)</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">todoList</span>:newTodo&#125;)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line"></div><div class="line">  render()&#123;</div><div class="line">    <span class="keyword">return</span>(</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;Header addTodo = &#123;this.addTodo&#125;&gt;&lt;/Header&gt;</div><div class="line">        &lt;List todos=&#123;this.state.todoList&#125; updateTodo = &#123;this.updateTodo&#125; deleteTodo=&#123;this.deleteTodo&#125;&gt;&lt;/List&gt;</div><div class="line">        &lt;Footer todos=&#123;this.state.todoList&#125; clearDone = &#123;this.clearDone&#125; handleCheckAll = &#123;this.handleCheckAll&#125;&gt;&lt;/Footer&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</div></pre></td></tr></table></figure></p>
<p>相比于VUE，React的语法更简洁明了，作为后端开发，更能接受React的编码风格。state作为组件的内置属性，可以在其中放一些自己想要的数据。同时React还提供更新state的API接口setState方法。而props也是作为React的核心属性之一，父组件可以通过props来给子组件传递数据，这里的数据不仅仅是一些JSON字符串，还可以是函数。可以发现React组件内部的函数都是使用箭头函数和ES6的一些语法糖如解构赋值语句等，整体看来清爽很多。虽然VUE的一些内置指令能更方便完成功能，但React的简洁性优雅性更能俘获我的青睐。</p>
<p>Header中唯一要做的是输入内容敲击回车完成输入。由于整个应用的数据是由App维护的，因此整个list中的数据是放到App的state中。这种限制使得所有操作数据的函数都得在App中定义，子组件使用的时候通过父组件的props传递过去。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">'nanoid'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">constructor</span>(props)&#123;</div><div class="line">        <span class="keyword">super</span>(props)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    keyDown = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">if</span>(event.keyCode !== <span class="number">13</span>) <span class="keyword">return</span></div><div class="line">        <span class="keyword">let</span> &#123;target&#125; = event</div><div class="line">        <span class="built_in">console</span>.log(target.value)</div><div class="line">        <span class="keyword">const</span> todoObj = &#123;<span class="attr">id</span>:nanoid(),<span class="attr">name</span>:target.value,<span class="attr">done</span>:<span class="literal">false</span>&#125;</div><div class="line">        <span class="keyword">this</span>.props.addTodo(todoObj)</div><div class="line">        target.value = <span class="string">''</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div className="todo-header"&gt;</div><div class="line">                &lt;input type='text'  placeholder="请输入待办" onKeyDown=&#123;this.keyDown&#125;&gt;&lt;/input&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在Header中敲击键盘enter后会将输入框中内容组装成对象传递给组件App的函数addTodo。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> Item <span class="keyword">from</span> <span class="string">'../Item'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">List</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">    </div><div class="line">    render() &#123;</div><div class="line">        <span class="comment">// 层层传递。就是无限套娃，父亲传给孩子，孩子还能穿给孙子</span></div><div class="line">        <span class="keyword">const</span> &#123;todos,updateTodo,deleteTodo&#125; = <span class="keyword">this</span>.props</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;ul className="todo-main"&gt;</div><div class="line">                &#123;</div><div class="line">                    todos.map(todo=&gt;&#123;</div><div class="line">                        return &lt;Item key=&#123;todo.id&#125; &#123;...todo&#125; updateTodo = &#123;updateTodo&#125; deleteTodo = &#123;deleteTodo&#125;&gt;&lt;/Item&gt;</div><div class="line">                    &#125;)</div><div class="line">                &#125;</div><div class="line">            &lt;/ul&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>List组件中接收来自App组件的props，同时将这些props也传递给自己的孩子Item。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">    handleCheck = <span class="function">(<span class="params">id</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// 闭包调用，返回一个函数，这个函数中调用的是父组件传的props的函数</span></div><div class="line">       <span class="keyword">return</span> <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">this</span>.props.updateTodo(id,event.target.checked)</div><div class="line">       &#125;</div><div class="line">    &#125;</div><div class="line">    mouseEvent = <span class="function">(<span class="params">flag</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            <span class="keyword">this</span>.setState(&#123;<span class="attr">mouse</span>:flag&#125;)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    deleteTodo = <span class="function">(<span class="params">id</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            <span class="keyword">this</span>.props.deleteTodo(id)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    state = &#123;<span class="attr">mouse</span>:<span class="literal">false</span>&#125; <span class="comment">//标识鼠标移入、移出</span></div><div class="line"></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">const</span> &#123;id,name,done&#125; = <span class="keyword">this</span>.props</div><div class="line">        <span class="keyword">const</span> &#123;mouse&#125; = <span class="keyword">this</span>.state</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;li style=&#123;&#123;backgroundColor:mouse ? '#ddd' : 'white'&#125;&#125; onMouseEnter=&#123;this.mouseEvent(true)&#125; onMouseLeave=&#123;this.mouseEvent(false)&#125;&gt;</div><div class="line">                &lt;label&gt;</div><div class="line">                    &lt;input type='checkbox' checked=&#123;done&#125; onChange=&#123;this.handleCheck(id)&#125;&gt;&lt;/input&gt;</div><div class="line">                    &lt;span&gt;&#123;name&#125;&lt;/span&gt;</div><div class="line">                &lt;/label&gt;</div><div class="line">                &lt;button onClick=&#123;this.deleteTodo(id)&#125; className="btn btn-danger" style=&#123;&#123;display:mouse?'block':'none'&#125;&#125;&gt;删除&lt;/button&gt;</div><div class="line">            &lt;/li&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Item组件中有自己的数据mouse，在每个条目中针对鼠标移入移出定义了对应的事件，触发相应的动作来更新mouse这个属性，进而改变元素的样式。同时对条目的勾选框状态进行数据绑定，以及针对事件做了相应的函数处理。这里的函数和之前的函数不同，这里的函数为高阶函数，简单理解为返回值也是一个函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Footer</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line"></div><div class="line">    clearDone = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="comment">//因为数据不在这个组件里维护，所以干脆让父亲去做就好了</span></div><div class="line">        <span class="keyword">this</span>.props.clearDone()</div><div class="line">    &#125;</div><div class="line">    handleCheckAll = <span class="function">(<span class="params">event</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// 同样的道理，直接交给父亲处理</span></div><div class="line">        <span class="keyword">this</span>.props.handleCheckAll(event.target.checked)</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">const</span> &#123;todos&#125; = <span class="keyword">this</span>.props;</div><div class="line">        <span class="comment">//总数</span></div><div class="line">		<span class="keyword">const</span> total = todos.length</div><div class="line">        <span class="keyword">const</span> done = todos.reduce(<span class="function">(<span class="params">accumulator,currentValue</span>)=&gt;</span>&#123;<span class="keyword">return</span> accumulator + (currentValue.done?<span class="number">1</span>:<span class="number">0</span>)&#125;,<span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div className="todo-footer"&gt;</div><div class="line">                &lt;label&gt;</div><div class="line">                    &lt;input type="checkbox" onChange=&#123;this.handleCheckAll&#125; checked=&#123;total === done &amp;&amp; total !==0&#125;&gt;&lt;/input&gt;</div><div class="line">                &lt;/label&gt;</div><div class="line">                &lt;span&gt;</div><div class="line">                    &lt;span&gt;已完成&#123;done&#125;&lt;/span&gt;/&#123;total&#125;</div><div class="line">                &lt;/span&gt;</div><div class="line">                &lt;button onClick=&#123;this.clearDone&#125; className="btn btn-danger"&gt;清除已完成任务&lt;/button&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>底部Footer组件相对来说很简单，套路基本一样，这里就不赘述了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>相比VUE，React对原生JS的要求要高一点，尤其很多ES6的骚语法。我不喜欢VUE还是因为它太多指令，看的让人眼花缭乱，既不简洁也不优雅，而写React有种在写后端代码的错觉，也更贴近原生JS。</p>
<p>React牛皮，我爱React。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.bilibili.com/video/BV1wy4y1D7JT?p=55" target="_blank" rel="external">React教程</a></p>
<p><a href="https://github.com/Mr-Vincent/todo-list" target="_blank" rel="external">完整代码</a></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
    <hr />
    <h3>留言:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>



                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/Mr-Vincent" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2021 Mr-Vincent<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'wei-dong';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>

</html>